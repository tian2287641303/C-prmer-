# C++内存


## C++存储空间分类 


+ **堆内存** 自由空间，用来存储用户动态分配的对象。
+ **栈内存** 用来保存定义在函数内的非静态(static)对象。
+ **静态内存** 用来保存局部static对象以及定义在任何函数之外的变量。
+ **

 
## 内存对齐

### 不同类型变量所占内存
 |s |s |
 |------ |------ |
### 内存对齐的原因
+ 平台原因 某些硬件平台不支持访问任意地址上的任意地址，只能在特定地址取特定类型的数据，否则可能会抛出硬件异常。

+ 性能原因 数据结构应该尽量在边界上对齐，因为内存未对齐的数据可能会造成cpu进行许多额外的操作，造成cpu性能的浪费。

### 内存对齐三规则

+ **结构体**的首元素都位于偏移量为0的位置，以后每个数据成员的起始位置都必须在该数据成员对齐值的倍数偏移位置。
+ **结构体**的大小必须能被**结构体**内最大的元素整除，不行的话会在结构体尾部补充字节(编译器自动填充)。
+ **子结构体变量**的对齐值为其中最宽元素的对齐值(空结构体和空类C++中占1字节)。

### 编译器有默认对齐值，结构体的实际对齐值会取结构体对齐值和编译器默认对齐值中较小的那个